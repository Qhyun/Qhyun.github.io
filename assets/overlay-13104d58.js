import{a0 as te,aC as de,a1 as fe,y as H,R as me,aQ as ve,z as Z,aR as pe,ab as se,aG as G,Q as K,aS as ye,aT as ge,aU as be,aV as Ce,aW as he,aX as U,C as _,ak as j,d as Y,h as N,aY as W,L as C,A as ke,aZ as we,am as Ee,v as J,a_ as Me,e as O,o as A,f as X,g as V,K as k,i as o,t as Te,w as I,n as q,a7 as Be,W as Ie,M as x,a5 as ne,D as le,a$ as Se,b0 as De,b1 as $e,b2 as Le,$ as Q,r as S,b3 as Ae,b4 as Oe,T as Fe,aB as Pe,b5 as ee,I as ze,b6 as oe,J as Re,a4 as Ne,V as Ye,at as Ve,b7 as Ue,a9 as We,aa as Xe,b8 as He,O as Ke}from"./index-135bdec9.js";import{U as ae}from"./event-9519ab40.js";const je=(e,s,c)=>{let a={offsetX:0,offsetY:0};const i=n=>{const r=n.clientX,v=n.clientY,{offsetX:f,offsetY:p}=a,t=e.value.getBoundingClientRect(),m=t.left,w=t.top,F=t.width,P=t.height,z=document.documentElement.clientWidth,D=document.documentElement.clientHeight,R=-m+f,$=-w+p,E=z-m-F+f,M=D-w-P+p,L=h=>{const l=Math.min(Math.max(f+h.clientX-r,R),E),b=Math.min(Math.max(p+h.clientY-v,$),M);a={offsetX:l,offsetY:b},e.value.style.transform=`translate(${H(l)}, ${H(b)})`},y=()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",y)},d=()=>{s.value&&e.value&&s.value.addEventListener("mousedown",i)},u=()=>{s.value&&e.value&&s.value.removeEventListener("mousedown",i)};te(()=>{de(()=>{c.value?d():u()})}),fe(()=>{u()})},qe=(e,s={})=>{me(e)||ve("[useLockscreen]","You need to pass a ref param to this function");const c=s.ns||Z("popup"),a=pe(()=>c.bm("parent","hidden"));if(!se||G(document.body,a.value))return;let i=0,d=!1,u="0";const n=()=>{setTimeout(()=>{he(document==null?void 0:document.body,a.value),d&&document&&(document.body.style.width=u)},200)};K(e,r=>{if(!r){n();return}d=!G(document.body,a.value),d&&(u=document.body.style.width),i=ye(c.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,f=ge(document.body,"overflowY");i>0&&(v||f==="scroll")&&d&&(document.body.style.width=`calc(100% - ${i}px)`),be(document.body,a.value)}),Ce(()=>n())},ue=e=>{if(!e)return{onClick:U,onMousedown:U,onMouseup:U};let s=!1,c=!1;return{onClick:u=>{s&&c&&e(u),s=c=!1},onMousedown:u=>{s=u.target===u.currentTarget},onMouseup:u=>{c=u.target===u.currentTarget}}},xe=_({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:j([String,Array,Object])},zIndex:{type:j([String,Number])}}),Ze={click:e=>e instanceof MouseEvent},_e="overlay";var Ge=Y({name:"ElOverlay",props:xe,emits:Ze,setup(e,{slots:s,emit:c}){const a=Z(_e),i=r=>{c("click",r)},{onClick:d,onMousedown:u,onMouseup:n}=ue(e.customMaskEvent?void 0:i);return()=>e.mask?N("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:u,onMouseup:n},[C(s,"default")],W.STYLE|W.CLASS|W.PROPS,["onClick","onMouseup","onMousedown"]):ke("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(s,"default")])}});const Je=Ge,ie=Symbol("dialogInjectionKey"),re=_({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:we},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Qe={close:()=>!0},eo=["aria-label"],oo=["id"],to=Y({name:"ElDialogContent"}),so=Y({...to,props:re,emits:Qe,setup(e){const s=e,{t:c}=Ee(),{Close:a}=Se,{dialogRef:i,headerRef:d,bodyId:u,ns:n,style:r}=J(ie),{focusTrapRef:v}=J(Me),f=De(v,i),p=O(()=>s.draggable);return je(i,d,p),(t,m)=>(A(),X("div",{ref:o(f),class:k([o(n).b(),o(n).is("fullscreen",t.fullscreen),o(n).is("draggable",o(p)),o(n).is("align-center",t.alignCenter),{[o(n).m("center")]:t.center},t.customClass]),style:ne(o(r)),tabindex:"-1"},[V("header",{ref_key:"headerRef",ref:d,class:k(o(n).e("header"))},[C(t.$slots,"header",{},()=>[V("span",{role:"heading",class:k(o(n).e("title"))},Te(t.title),3)]),t.showClose?(A(),X("button",{key:0,"aria-label":o(c)("el.dialog.close"),class:k(o(n).e("headerbtn")),type:"button",onClick:m[0]||(m[0]=w=>t.$emit("close"))},[N(o(Ie),{class:k(o(n).e("close"))},{default:I(()=>[(A(),q(Be(t.closeIcon||o(a))))]),_:1},8,["class"])],10,eo)):x("v-if",!0)],2),V("div",{id:o(u),class:k(o(n).e("body"))},[C(t.$slots,"default")],10,oo),t.$slots.footer?(A(),X("footer",{key:0,class:k(o(n).e("footer"))},[C(t.$slots,"footer")],2)):x("v-if",!0)],6))}});var no=le(so,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const lo=_({...re,appendToBody:{type:Boolean,default:!1},beforeClose:{type:j(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),ao={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>$e(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},uo=(e,s)=>{const a=Pe().emit,{nextZIndex:i}=Le();let d="";const u=Q(),n=Q(),r=S(!1),v=S(!1),f=S(!1),p=S(e.zIndex||i());let t,m;const w=Ae("namespace",Oe),F=O(()=>{const g={},B=`--${w.value}-dialog`;return e.fullscreen||(e.top&&(g[`${B}-margin-top`]=e.top),e.width&&(g[`${B}-width`]=H(e.width))),g}),P=O(()=>e.alignCenter?{display:"flex"}:{});function z(){a("opened")}function D(){a("closed"),a(ae,!1),e.destroyOnClose&&(f.value=!1)}function R(){a("close")}function $(){m==null||m(),t==null||t(),e.openDelay&&e.openDelay>0?{stop:t}=ee(()=>y(),e.openDelay):y()}function E(){t==null||t(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=ee(()=>h(),e.closeDelay):h()}function M(){function g(B){B||(v.value=!0,r.value=!1)}e.beforeClose?e.beforeClose(g):E()}function L(){e.closeOnClickModal&&M()}function y(){se&&(r.value=!0)}function h(){r.value=!1}function l(){a("openAutoFocus")}function b(){a("closeAutoFocus")}function T(g){var B;((B=g.detail)==null?void 0:B.focusReason)==="pointer"&&g.preventDefault()}e.lockScroll&&qe(r);function ce(){e.closeOnPressEscape&&M()}return K(()=>e.modelValue,g=>{g?(v.value=!1,$(),f.value=!0,p.value=e.zIndex?p.value++:i(),Fe(()=>{a("open"),s.value&&(s.value.scrollTop=0)})):r.value&&E()}),K(()=>e.fullscreen,g=>{s.value&&(g?(d=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=d)}),te(()=>{e.modelValue&&(r.value=!0,f.value=!0,$())}),{afterEnter:z,afterLeave:D,beforeLeave:R,handleClose:M,onModalClick:L,close:E,doClose:h,onOpenAutoFocus:l,onCloseAutoFocus:b,onCloseRequested:ce,onFocusoutPrevented:T,titleId:u,bodyId:n,closed:v,style:F,overlayDialogStyle:P,rendered:f,visible:r,zIndex:p}},io=["aria-label","aria-labelledby","aria-describedby"],ro=Y({name:"ElDialog",inheritAttrs:!1}),co=Y({...ro,props:lo,emits:ao,setup(e,{expose:s}){const c=e,a=ze();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},O(()=>!!a.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},O(()=>!!c.customClass));const i=Z("dialog"),d=S(),u=S(),n=S(),{visible:r,titleId:v,bodyId:f,style:p,overlayDialogStyle:t,rendered:m,zIndex:w,afterEnter:F,afterLeave:P,beforeLeave:z,handleClose:D,onModalClick:R,onOpenAutoFocus:$,onCloseAutoFocus:E,onCloseRequested:M,onFocusoutPrevented:L}=uo(c,d);Re(ie,{dialogRef:d,headerRef:u,bodyId:f,ns:i,rendered:m,style:p});const y=ue(R),h=O(()=>c.draggable&&!c.fullscreen);return s({visible:r,dialogContentRef:n}),(l,b)=>(A(),q(He,{to:"body",disabled:!l.appendToBody},[N(Xe,{name:"dialog-fade",onAfterEnter:o(F),onAfterLeave:o(P),onBeforeLeave:o(z),persisted:""},{default:I(()=>[Ne(N(o(Je),{"custom-mask-event":"",mask:l.modal,"overlay-class":l.modalClass,"z-index":o(w)},{default:I(()=>[V("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(v),"aria-describedby":o(f),class:k(`${o(i).namespace.value}-overlay-dialog`),style:ne(o(t)),onClick:b[0]||(b[0]=(...T)=>o(y).onClick&&o(y).onClick(...T)),onMousedown:b[1]||(b[1]=(...T)=>o(y).onMousedown&&o(y).onMousedown(...T)),onMouseup:b[2]||(b[2]=(...T)=>o(y).onMouseup&&o(y).onMouseup(...T))},[N(o(Ye),{loop:"",trapped:o(r),"focus-start-el":"container",onFocusAfterTrapped:o($),onFocusAfterReleased:o(E),onFocusoutPrevented:o(L),onReleaseRequested:o(M)},{default:I(()=>[o(m)?(A(),q(no,Ve({key:0,ref_key:"dialogContentRef",ref:n},l.$attrs,{"custom-class":l.customClass,center:l.center,"align-center":l.alignCenter,"close-icon":l.closeIcon,draggable:o(h),fullscreen:l.fullscreen,"show-close":l.showClose,title:l.title,onClose:o(D)}),Ue({header:I(()=>[l.$slots.title?C(l.$slots,"title",{key:1}):C(l.$slots,"header",{key:0,close:o(D),titleId:o(v),titleClass:o(i).e("title")})]),default:I(()=>[C(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:I(()=>[C(l.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):x("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,io)]),_:3},8,["mask","overlay-class","z-index"]),[[We,o(r)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var fo=le(co,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const po=Ke(fo);export{Je as E,qe as a,ue as b,po as c,je as u};
