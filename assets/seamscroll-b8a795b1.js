import{w as O,m as i,v as f,z as C,X as Z,aM as ee,Q as te,V as m,W as U,aN as le,F as I,G as V,a2 as ae,aE as ne,a9 as Y,a7 as oe,J as se,aH as ie,aI as ue,aK as re}from"./index-7159930e.js";function ce(l,o,r,v){var e,w=!1,T=0;function y(){e&&clearTimeout(e)}function x(){y(),w=!0}typeof o!="boolean"&&(v=r,r=o,o=void 0);function c(){for(var d=arguments.length,S=new Array(d),n=0;n<d;n++)S[n]=arguments[n];var u=this,p=Date.now()-T;if(w)return;function a(){T=Date.now(),r.apply(u,S)}function h(){e=void 0}v&&!e&&a(),y(),v===void 0&&p>l?a():o!==!0&&(e=setTimeout(v?h:a,v===void 0?l-p:l))}return c.cancel=x,c}function fe(l){const o=le();o&&Object.assign(o.proxy,l)}const ve={modelValue:{type:Boolean,default:!0},list:{type:Array,required:!0,default:[]},step:{type:Number,default:1},limitScrollNum:{type:Number,default:3},hover:{type:Boolean,default:!1},direction:{type:String,default:"up"},singleHeight:{type:Number,default:0},singleWidth:{type:Number,default:0},singleWaitTime:{type:Number,default:1e3},isRemUnit:{type:Boolean,default:!1},isWatch:{type:Boolean,default:!0},delay:{type:Number,default:0},ease:{type:[String,Object],default:"ease-in"},count:{type:Number,default:-1},copyNum:{type:Number,default:1},wheel:{type:Boolean,default:!1},singleLine:{type:Boolean,default:!1}};globalThis.window.cancelAnimationFrame=function(){return globalThis.window.cancelAnimationFrame||globalThis.window.webkitCancelAnimationFrame||globalThis.window.mozCancelAnimationFrame||globalThis.window.oCancelAnimationFrame||globalThis.window.msCancelAnimationFrame||function(l){return globalThis.window.clearTimeout(l)}}();globalThis.window.requestAnimationFrame=function(){return globalThis.window.requestAnimationFrame||globalThis.window.webkitRequestAnimationFrame||globalThis.window.mozRequestAnimationFrame||globalThis.window.oRequestAnimationFrame||globalThis.window.msRequestAnimationFrame||function(l){return globalThis.window.setTimeout(l,1e3/60)}}();function me(l){l&&typeof l!="boolean"&&l.length>100&&console.warn(`数据达到了${l.length}条有点多哦~,可能会造成部分老旧浏览器卡顿。`)}const de=O({name:"vue3-seamless-scroll",inheritAttrs:!1,props:ve,emits:["stop","count","move"],setup(l,{slots:o,emit:r,attrs:v}){const e=l,w=i(null),T=i(null),y=i(null),x=i(null),c=i(null),d=i(0),S=i(0),n=i(0),u=i(0),p=i(!1),a=i(0),h=f(()=>e.list?e.list.length>=e.limitScrollNum:!1),z=f(()=>({width:d.value?`${d.value}px`:"auto",transform:`translate(${n.value}px,${u.value}px)`,transition:`all ${typeof e.ease=="string"?e.ease:"cubic-bezier("+e.ease.x1+","+e.ease.y1+","+e.ease.x2+","+e.ease.y2+")"} ${e.delay}ms`,overflow:"hidden",display:e.singleLine?"flex":"block"})),W=f(()=>e.direction=="left"||e.direction=="right"),B=f(()=>W.value?{float:"left",overflow:"hidden",display:e.singleLine?"flex":"block",flexShrink:e.singleLine?0:1}:{overflow:"hidden"}),L=f(()=>e.isRemUnit?parseInt(globalThis.window.getComputedStyle(globalThis.document.documentElement,null).fontSize):1),R=f(()=>e.singleWidth*L.value),F=f(()=>e.singleHeight*L.value),G=f(()=>{let t,s=e.step;return W.value?t=R.value:t=F.value,t>0&&t%s>0&&console.error("如果设置了单步滚动，step 需是单步大小的约数，否则无法保证单步滚动结束的位置是否准确。~~~~~"),s}),b=()=>{cancelAnimationFrame(x.value),x.value=null},H=(t,s,X)=>{x.value=requestAnimationFrame(function(){const D=S.value/2,P=d.value/2;if(t==="up"?(Math.abs(u.value)>=D&&(u.value=0,a.value+=1,r("count",a.value)),u.value-=s):t==="down"?(u.value>=0&&(u.value=D*-1,a.value+=1,r("count",a.value)),u.value+=s):t==="left"?(Math.abs(n.value)>=P&&(n.value=0,a.value+=1,r("count",a.value)),n.value-=s):t==="right"&&(n.value>=0&&(n.value=P*-1,a.value+=1,r("count",a.value)),n.value+=s),X)return;let{singleWaitTime:j}=e;c.value&&clearTimeout(c.value),F.value?Math.abs(u.value)%F.value<s?c.value=setTimeout(()=>{g()},j):g():R.value&&Math.abs(n.value)%R.value<s?c.value=setTimeout(()=>{g()},j):g()})},g=()=>{if(b(),p.value||!h.value||a.value===e.count){r("stop",a.value),a.value=0;return}H(e.direction,G.value,!1)},$=()=>{if(me(e.list),W.value){let t=T.value.offsetWidth;t=t*2+1,d.value=t}h.value?(S.value=y.value.offsetHeight,e.modelValue&&g()):(b(),u.value=n.value=0)},N=()=>{p.value=!1,g()},M=()=>{p.value=!0,c.value&&clearTimeout(c.value),b()},A=f(()=>e.hover&&e.modelValue&&h.value),J=ce(30,t=>{b();const s=F.value?F.value:15;t.deltaY<0&&H("down",s,!0),t.deltaY>0&&H("up",s,!0)}),K=t=>{J(t)},E=()=>{b(),p.value=!1,$()};fe({Reset:()=>{E()}}),C(()=>e.list,()=>{e.isWatch&&Z(()=>{E()})},{deep:!0}),C(()=>e.modelValue,t=>{t?N():M()}),C(()=>e.count,t=>{t!==0&&N()}),ee(()=>{b(),clearTimeout(c.value)}),te(()=>{h.value&&$()});const{default:_,html:q}=o,Q=new Array(e.copyNum).fill(null),k=()=>m(U,null,[m("div",{ref:T,style:B.value},[_&&_()]),h.value?Q.map(()=>q&&typeof q=="function"?m("div",{style:B.value},[q()]):m("div",{style:B.value},[_&&_()])):null]);return()=>m("div",{ref:w,class:v.class},[e.wheel&&e.hover?m("div",{ref:y,style:z.value,onMouseenter:()=>{A.value&&M()},onMouseleave:()=>{A.value&&N()},onWheel:t=>{A.value&&K(t)}},[k()]):m("div",{ref:y,style:z.value,onMouseenter:()=>{A.value&&M()},onMouseleave:()=>{A.value&&N()}},[k()])])}}),pe=l=>(ie("data-v-2bff1c91"),l=l(),ue(),l),he={class:"seam-scroll"},ge=pe(()=>Y("div",{class:"base-example p2"},"基础示例",-1)),we=O({__name:"seamscroll",setup(l){const o=i([{title:"1. 人生得意需尽欢，莫使金樽空对月。"},{title:"2. 君不见长河之水天上来，奔流到海不复回。"},{title:"3. 莫等闲，白了少年头，空悲切。"},{title:"4. 迄今为止的人生都大写着失败，但不妨碍我继续向前。"},{title:"5. 天生我材必有用，千金散去还复来。"},{title:"6. 谁怕!一蓑烟雨任平生。"},{title:"7. 我劝天公重抖擞,不拘一格降人才。"},{title:"8. 知否知否，应是绿肥红瘦。"}]);return(r,v)=>(I(),V("div",he,[ge,m(se(de),{list:o.value,class:"scroll p4",hover:!0,step:.5},{default:ae(()=>[(I(!0),V(U,null,ne(o.value,(e,w)=>(I(),V("div",{class:"item",key:w},[Y("span",null,oe(e.title),1)]))),128))]),_:1},8,["list"])]))}});const Te=re(we,[["__scopeId","data-v-2bff1c91"]]);export{Te as default};
