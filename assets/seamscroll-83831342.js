import{d as U,r as i,e as f,Q as M,T as ee,bo as te,a0 as le,h as v,F as Y,aB as ae,o as E,f as I,w as L,i as ne,j as oe,g as Q,t as se,p as ie,q as ue,_ as re}from"./index-135bdec9.js";import{E as ce}from"./card-41d291eb.js";function fe(l,o,r,m){var e,y=!1,d=0;function b(){e&&clearTimeout(e)}function x(){b(),y=!0}typeof o!="boolean"&&(m=r,r=o,o=void 0);function c(){for(var p=arguments.length,S=new Array(p),n=0;n<p;n++)S[n]=arguments[n];var u=this,h=Date.now()-d;if(y)return;function a(){d=Date.now(),r.apply(u,S)}function g(){e=void 0}m&&!e&&a(),b(),m===void 0&&h>l?a():o!==!0&&(e=setTimeout(m?g:a,m===void 0?l-h:l))}return c.cancel=x,c}function ve(l){const o=ae();o&&Object.assign(o.proxy,l)}const me={modelValue:{type:Boolean,default:!0},list:{type:Array,required:!0,default:[]},step:{type:Number,default:1},limitScrollNum:{type:Number,default:3},hover:{type:Boolean,default:!1},direction:{type:String,default:"up"},singleHeight:{type:Number,default:0},singleWidth:{type:Number,default:0},singleWaitTime:{type:Number,default:1e3},isRemUnit:{type:Boolean,default:!1},isWatch:{type:Boolean,default:!0},delay:{type:Number,default:0},ease:{type:[String,Object],default:"ease-in"},count:{type:Number,default:-1},copyNum:{type:Number,default:1},wheel:{type:Boolean,default:!1},singleLine:{type:Boolean,default:!1}};globalThis.window.cancelAnimationFrame=function(){return globalThis.window.cancelAnimationFrame||globalThis.window.webkitCancelAnimationFrame||globalThis.window.mozCancelAnimationFrame||globalThis.window.oCancelAnimationFrame||globalThis.window.msCancelAnimationFrame||function(l){return globalThis.window.clearTimeout(l)}}();globalThis.window.requestAnimationFrame=function(){return globalThis.window.requestAnimationFrame||globalThis.window.webkitRequestAnimationFrame||globalThis.window.mozRequestAnimationFrame||globalThis.window.oRequestAnimationFrame||globalThis.window.msRequestAnimationFrame||function(l){return globalThis.window.setTimeout(l,1e3/60)}}();function de(l){l&&typeof l!="boolean"&&l.length>100&&console.warn(`数据达到了${l.length}条有点多哦~,可能会造成部分老旧浏览器卡顿。`)}const pe=U({name:"vue3-seamless-scroll",inheritAttrs:!1,props:me,emits:["stop","count","move"],setup(l,{slots:o,emit:r,attrs:m}){const e=l,y=i(null),d=i(null),b=i(null),x=i(null),c=i(null),p=i(0),S=i(0),n=i(0),u=i(0),h=i(!1),a=i(0),g=f(()=>e.list?e.list.length>=e.limitScrollNum:!1),V=f(()=>({width:p.value?`${p.value}px`:"auto",transform:`translate(${n.value}px,${u.value}px)`,transition:`all ${typeof e.ease=="string"?e.ease:"cubic-bezier("+e.ease.x1+","+e.ease.y1+","+e.ease.x2+","+e.ease.y2+")"} ${e.delay}ms`,overflow:"hidden",display:e.singleLine?"flex":"block"})),N=f(()=>e.direction=="left"||e.direction=="right"),W=f(()=>N.value?{float:"left",overflow:"hidden",display:e.singleLine?"flex":"block",flexShrink:e.singleLine?0:1}:{overflow:"hidden"}),$=f(()=>e.isRemUnit?parseInt(globalThis.window.getComputedStyle(globalThis.document.documentElement,null).fontSize):1),R=f(()=>e.singleWidth*$.value),_=f(()=>e.singleHeight*$.value),G=f(()=>{let t,s=e.step;return N.value?t=R.value:t=_.value,t>0&&t%s>0&&console.error("如果设置了单步滚动，step 需是单步大小的约数，否则无法保证单步滚动结束的位置是否准确。~~~~~"),s}),T=()=>{cancelAnimationFrame(x.value),x.value=null},q=(t,s,Z)=>{x.value=requestAnimationFrame(function(){const j=S.value/2,P=p.value/2;if(t==="up"?(Math.abs(u.value)>=j&&(u.value=0,a.value+=1,r("count",a.value)),u.value-=s):t==="down"?(u.value>=0&&(u.value=j*-1,a.value+=1,r("count",a.value)),u.value+=s):t==="left"?(Math.abs(n.value)>=P&&(n.value=0,a.value+=1,r("count",a.value)),n.value-=s):t==="right"&&(n.value>=0&&(n.value=P*-1,a.value+=1,r("count",a.value)),n.value+=s),Z)return;let{singleWaitTime:O}=e;c.value&&clearTimeout(c.value),_.value?Math.abs(u.value)%_.value<s?c.value=setTimeout(()=>{w()},O):w():R.value&&Math.abs(n.value)%R.value<s?c.value=setTimeout(()=>{w()},O):w()})},w=()=>{if(T(),h.value||!g.value||a.value===e.count){r("stop",a.value),a.value=0;return}q(e.direction,G.value,!1)},z=()=>{if(de(e.list),N.value){let t=d.value.offsetWidth;t=t*2+1,p.value=t}g.value?(S.value=b.value.offsetHeight,e.modelValue&&w()):(T(),u.value=n.value=0)},A=()=>{h.value=!1,w()},C=()=>{h.value=!0,c.value&&clearTimeout(c.value),T()},F=f(()=>e.hover&&e.modelValue&&g.value),J=fe(30,t=>{T();const s=_.value?_.value:15;t.deltaY<0&&q("down",s,!0),t.deltaY>0&&q("up",s,!0)}),K=t=>{J(t)},k=()=>{T(),h.value=!1,z()};ve({Reset:()=>{k()}}),M(()=>e.list,()=>{e.isWatch&&ee(()=>{k()})},{deep:!0}),M(()=>e.modelValue,t=>{t?A():C()}),M(()=>e.count,t=>{t!==0&&A()}),te(()=>{T(),clearTimeout(c.value)}),le(()=>{g.value&&z()});const{default:B,html:H}=o,X=new Array(e.copyNum).fill(null),D=()=>v(Y,null,[v("div",{ref:d,style:W.value},[B&&B()]),g.value?X.map(()=>H&&typeof H=="function"?v("div",{style:W.value},[H()]):v("div",{style:W.value},[B&&B()])):null]);return()=>v("div",{ref:y,class:m.class},[e.wheel&&e.hover?v("div",{ref:b,style:V.value,onMouseenter:()=>{F.value&&C()},onMouseleave:()=>{F.value&&A()},onWheel:t=>{F.value&&K(t)}},[D()]):v("div",{ref:b,style:V.value,onMouseenter:()=>{F.value&&C()},onMouseleave:()=>{F.value&&A()}},[D()])])}}),he=l=>(ie("data-v-73bc3820"),l=l(),ue(),l),ge={class:"m-2"},we=he(()=>Q("span",null,"基础示例",-1)),ye=U({__name:"seamscroll",setup(l){const o=i([{title:"1. 人生得意需尽欢，莫使金樽空对月。"},{title:"2. 君不见长河之水天上来，奔流到海不复回。"},{title:"3. 莫等闲，白了少年头，空悲切。"},{title:"4. 迄今为止的人生都大写着失败，但不妨碍我继续向前。"},{title:"5. 天生我材必有用，千金散去还复来。"},{title:"6. 谁怕!一蓑烟雨任平生。"},{title:"7. 我劝天公重抖擞,不拘一格降人才。"},{title:"8. 知否知否，应是绿肥红瘦。"}]);return(r,m)=>{const e=ce;return E(),I("div",ge,[v(e,null,{header:L(()=>[we]),default:L(()=>[v(ne(pe),{list:o.value,class:"scroll",hover:!0,step:.5},{default:L(()=>[(E(!0),I(Y,null,oe(o.value,(y,d)=>(E(),I("div",{class:"item",key:d},[Q("span",null,se(y.title),1)]))),128))]),_:1},8,["list"])]),_:1})])}}});const Se=re(ye,[["__scopeId","data-v-73bc3820"]]);export{Se as default};
